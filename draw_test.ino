#include <SPI.h>
#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

Adafruit_SSD1306 display(0);

#if (SSD1306_LCDHEIGHT != 48)
#error("Height incorrect, please fix Adafruit_SSD1306.h!");
#endif

#define QR_CODE_HEIGHT 25
#define QR_CODE_WIDTH  25
#define PADDING 5

static const unsigned char PROGMEM qr_code_bmp[] =
{
B11111110, B01110100, B10111111, B10000000,
B10000010, B00011000, B00100000, B10000000,
B10111010, B01110010, B10101110, B10000000,
B10111010, B10110011, B10101110, B10000000,
B10111010, B10101100, B00101110, B10000000,
B10000010, B01100110, B00100000, B10000000,
B11111110, B10101010, B10111111, B10000000,
B00000000, B01001100, B10000000, B00000000,
B11000111, B01101011, B10001100, B00000000,
B00100001, B10100011, B11001111, B00000000,
B01000110, B11011001, B00110101, B10000000,
B01101000, B10110011, B10001100, B10000000,
B11100110, B01100110, B11100000, B10000000,
B10100000, B00101111, B00000001, B00000000,
B10011110, B01100111, B01010101, B10000000,
B10011101, B10001110, B10001010, B10000000,
B10101111, B00101010, B11111010, B00000000,
B00000000, B11100001, B10001010, B00000000,
B11111110, B11101110, B10101100, B10000000,
B10000010, B11110010, B10001000, B00000000,
B10111010, B01010001, B11111110, B10000000,
B10111010, B00101100, B00110101, B10000000,
B10111010, B00100110, B01000010, B10000000,
B10000010, B10101101, B10111000, B10000000,
B11111110, B10011101, B10100100, B10000000,
};

void displayQRCode(uint8_t x, uint8_t y)
{
  display.drawBitmap(x, y, qr_code_bmp, QR_CODE_WIDTH, QR_CODE_HEIGHT, BLACK);
}

void displayWiFiName(uint8_t x, uint8_t y)
{
  display.setTextColor(BLACK);
  display.setTextSize(1);
  display.setCursor(PADDING + QR_CODE_WIDTH + PADDING - 1, PADDING + QR_CODE_HEIGHT - 6);
  display.print("WiFi:");
  display.setCursor(PADDING + QR_CODE_WIDTH - 6, PADDING + QR_CODE_HEIGHT + PADDING);
  display.print("JulIoT");
}

void setup() {

  display.begin(SSD1306_SWITCHCAPVCC, 0x3C);  // initialize with the I2C addr 0x3C (for the 64x48)
  display.clearDisplay();

  display.fillScreen(WHITE);
  //displayQRCode(8, (SSD1306_LCDHEIGHT - QR_CODE_HEIGHT) / 2);
  displayQRCode(PADDING, PADDING);
  displayWiFiName(5, QR_CODE_HEIGHT + 5);
  //display.drawBitmap(8,8,qr_code_bmp, QR_CODE_WIDTH, QR_CODE_HEIGHT, BLACK);
  
  display.display();
  //delay(4000);
  //display.clearDisplay();
  //display.display();
}

void loop() {
  // put your main code here, to run repeatedly:

}
